(this["webpackJsonptext-optimizer-vi"]=this["webpackJsonptext-optimizer-vi"]||[]).push([[0],{322:function(e,t,n){e.exports=n(608)},327:function(e,t,n){},605:function(e,t,n){},608:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(73),r=n.n(i),l=(n(327),n(318)),c=n(16),s=n(623),u=n(617),m=n(615),d=n(621),g=n(618),f=n(308),h=n(622),v=n(619),p=n(304),b=n(228),E=n(172),y=n(19),k=n(305),S=n(312),O=n(313),j=n(316),w=n(317),x=n(224),N=n(315),C=n(314),A=n(203),L=n(307),G=n.n(L),T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return parseFloat(parseFloat("".concat(e)).toFixed(t))};function B(e){return e<.1&&e>-.1}var z=n(388),R=z.SentimentAnalyzer,F=z.PorterStemmer,P=new z.WordTokenizer,W=new z.SentenceTokenizer,D=new R("English",F,"afinn"),H=function(e){var t=e.onUpdateMetrics,n=e.highlight,i=Object(a.useState)(null),r=Object(c.a)(i,2),l=r[0],s=r[1],u=Object(a.useState)(n),m=Object(c.a)(u,2),g=m[0],f=m[1],h=Object(a.useState)(""),v=Object(c.a)(h,2),p=v[0],b=v[1],E=Object(a.useState)(null),L=Object(c.a)(E,2),z=L[0],R=L[1],F=Object(a.useState)(null),H=Object(c.a)(F,2),M=H[0],U=H[1],K=Object(a.useState)(null),I=Object(c.a)(K,2),J=I[0],_=I[1],q=Object(a.useState)(!1),V=Object(c.a)(q,2),Y=V[0],$=V[1],Q=Object(a.useState)(null),X=Object(c.a)(Q,2),Z=X[0],ee=X[1],te=function(e){var t=document.createElement("div");return t.innerHTML=e,t.innerText},ne=function(){var e,t=function(){var e=[],t=Object(y.a)(p.matchAll(/p>(.*?)<\/p/g)),n=["&nbsp;"];return t.forEach((function(t){var a,o=te(null!==(a=t[1])&&void 0!==a?a:"").trim();o.length>0&&!n.includes(o)&&e.push(o)})),e}(),n=te(p),a=P.tokenize(n),o=t.map((function(e){return T(D.getSentiment(P.tokenize(e))||0)})),i=new Map([["eng",[]],["deu",[]],["fra",[]],["ita",[]]]);t.forEach((function(e){var t,n,a,o;null===(t=i.get("eng"))||void 0===t||t.push(0);null===(n=i.get("deu"))||void 0===n||n.push(0),null===(a=i.get("fra"))||void 0===a||a.push(0),null===(o=i.get("ita"))||void 0===o||o.push(0);var r=W.tokenize(e),l=r.length;r.forEach((function(e){var t=G()(e,{minLength:5,only:["fra","eng","deu","ita"]});if(console.log("lang: ".concat(t)),i.has(t)){var n,a,o=null!==(n=i.get(t))&&void 0!==n?n:[];o[null!==(a=o.length-1)&&void 0!==a?a:-1]+=1}else l-=1})),Object(y.a)(i.keys()).forEach((function(e){var t,n=Object(y.a)(null!==(t=i.get(e))&&void 0!==t?t:[]);n[n.length-1]=T(n[n.length-1]/l),i.set(e,n)}))}));var r=o.reduce((function(e,t){return e+t}),0)/o.length,l=null!==(e=o.map((function(e){return Math.pow(e-r,2)})).reduce((function(e,t){return e+t}),0)/o.length)&&void 0!==e?e:0;R({countWords:a.length,varianceScore:T(l),sentiments:o,neutralityScore:T(o.reduce((function(e,t){return e+t}),0)/o.length),languages:i})};Object(a.useEffect)((function(){M&&(clearTimeout(M),U(null));var e=setTimeout((function(){var e=J?J.getTime():2e3,t=(new Date).getTime()-e;J&&t>500&&ne(),M&&clearTimeout(M),U(null)}),1e3);U(e),_(new Date)}),[p]),Object(a.useEffect)((function(){z&&t(z)}),[z]);Object(a.useEffect)((function(){g!==n&&(l.editing.view.focus(),l.model.change((function(e){var t=l.model.document.getRoot().getChild(n),a=e.createPositionAt(t,0),o=e.createPositionAt(t,"end"),i=e.createRange(a,o);e.setSelection(i),f(n);var r=l.editing.mapper.toViewRange(i);Object(A.a)({target:l.editing.view.domConverter.viewRangeToDom(r),viewportOffset:0})})))}),[n]);var ae=function(e,t,n,a){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"end",r=t.createPositionAt(n,o),l=t.createPositionAt(n,i);t.setSelection(t.createRange(r,l)),e.execute("highlight",{value:"".concat(a,"Marker")})},oe=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"end",i=t.createPositionAt(n,a),r=t.createPositionAt(n,o);t.setSelection(t.createRange(i,r)),e.execute("highlight")},ie=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=e.model.document.getRoot(),o=e.model.document.selection.getFirstPosition(),i=n||0,r=function(){var o=a.getChild(i);if(!o)return"break";var r=Object(y.a)(null===o||void 0===o?void 0:o.getChildren()).reduce((function(e,t){return e+t.data}),"");return P.tokenize(null!==r&&void 0!==r?r:"").forEach((function(n,a){var i,l=null!==(i=D.getSentiment([n]))&&void 0!==i?i:0,c=r.indexOf(n),s=c+n.length;B(l)?oe(e,t,o,c,s):ae(e,t,o,l<0?"pink":"green",c,s)})),i+=1,null!==n?"break":void 0};null!==i;){var l=r();if("break"===l)break}t.setSelection(o,"end")},re=function(){ee(new Date)};return Object(a.useEffect)((function(){l&&$(!0),l&&!Y&&l.editing.view.document.on("clipboardInput",re)}),[l]),o.a.createElement(d.a.Group,{controlId:"editor"},o.a.createElement(k.CKEditor,{editor:S.a,onReady:function(e){return s(e)},config:{plugins:[O.a,j.a,w.a,x.a,N.a,C.a],toolbar:["heading","|","bold","italic"],placeholder:"Write your text"},data:p,onChange:function(e,t){t.model.change((function(e){if(Z&&(new Date).getTime()-Z.getTime()<500)return void ie(t,e);var n=t.model.document.selection.getFirstPosition();ie(t,e,n.path[0])}));var n=l.getData();b(n)}}),M&&o.a.createElement(d.a.Text,{className:"text-muted"},"Metrics are calculated once you stop writing"))},M=n(210),U=function(e){var t=e.data,n=e.onLabelClicked,a=e.colorBlindness,i=function(e){var t=a?"#90caf9":"#a5d6a7",n=a?"#ffef61":"#ef9a9a";return B(e)?"#333":e>0?t:n},r={datasets:[{data:t,label:"Sentiment per paragraph",fill:!1,borderColor:"#333",pointBackgroundColor:t.map((function(e){return i(e)})),pointBorderColor:t.map((function(e){return i(e)})),pointHoverBackgroundColor:t.map((function(e){return i(e)})),pointHoverBorderColor:t.map((function(e){return i(e)})),pointStyle:"rect",pointBorderWidth:10,pointHoverBorderWidth:14}],labels:t.map((function(e,t){return"".concat(t+1)}))};return o.a.createElement("div",{className:"timeline-chart-container",style:{height:"200px"}},o.a.createElement(M.Line,{data:r,height:200,onElementsClick:function(e){if(0!==e.length){var t=Object(c.a)(e,1)[0];n(t._index)}},options:{maintainAspectRatio:!1,responsive:!0,legend:{labels:{boxWidth:0}},scales:{yAxes:[{display:!0,ticks:{maxTicksLimit:5},scaleLabel:{display:!0,labelString:"Sentiment score"}}],xAxes:[{ticks:{padding:20},scaleLabel:{display:!0,labelString:"# Paragraph"}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}}}}))},K=n(620),I=function(e){var t=e.show,n=e.chartData,i=e.handleClose,r=e.colorBlindness,l=Object(a.useState)(t),s=Object(c.a)(l,2),u=s[0],d=s[1];Object(a.useEffect)((function(){d(t)}),[t]);var g=function(){return i()};return o.a.createElement(K.a,{show:u,onHide:g,backdrop:!0,size:"lg"},o.a.createElement(K.a.Header,{closeButton:!0},o.a.createElement(K.a.Title,null,"Sentiment timeline")),o.a.createElement(K.a.Body,null,o.a.createElement(U,{colorBlindness:r,data:n.data,onLabelClicked:n.onLabelClicked})),o.a.createElement(K.a.Footer,null,o.a.createElement(m.a,{variant:"secondary",onClick:g},"Close")))},J=["#ef5350","#333","#9b59b6","#80cbc4","#90caf9"];var _,q=function(e){var t=e.data,n=e.onBarClicked,a=function(e){var t,n=Object(y.a)(e.keys()),a=[];return n.forEach((function(t,n){a.push({label:t,backgroundColor:J[n],borderColor:J[n],borderWidth:1,stack:"".concat(t,"-").concat(n),data:e.get(t)})})),{datasets:a,labels:(null!==(t=e.get("eng"))&&void 0!==t?t:[]).map((function(e,t){return"".concat(t+1)}))}}(t);return o.a.createElement("div",{className:"languages-chart-container",style:{height:"200px"}},o.a.createElement(M.Bar,{data:a,height:200,onElementsClick:function(e){if(0!==e.length){var t=Object(c.a)(e,1)[0];n(t._index)}},options:{maintainAspectRatio:!1,responsive:!0,scales:{yAxes:[{stacked:!0,display:!0,ticks:{maxTicksLimit:5},scaleLabel:{display:!0,labelString:"Sentiment score"}}],xAxes:[{stacked:!0,ticks:{padding:20},scaleLabel:{display:!0,labelString:"# Paragraph"}}]},plugins:{zoom:{pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,mode:"x"}}}}}))},V=n(616),Y=function(){return o.a.createElement(V.a,{variant:"info"},"Please write some text in the editor.")},$=[{element:".timeline-chart-container",intro:"The sentiment score is negative when it is below 0 and positive when the score is above 0. The value 0 represents a perfect neutrality score.",position:"top"},{element:".timeline-chart-container",intro:"Click on a square point to focus the item in the editor.",position:"left"},{element:".timeline-chart-container",intro:"Scroll in the chart to zoom in or zoom out.",position:"top"},{element:".neutrality-score",intro:"The overall neutrality score is displayed here.",position:"top"},{element:".neutrality-variance",intro:"The variance measures how far a set of numbers is spread out from their average value.",position:"top"},{element:'[data-rb-event-key="Languages"]',intro:"Let's move to the language tab",position:"top"},{element:".languages-tab",intro:"Here we detect the languages. You can identify words used in different languages.",position:"top"},{element:".custom-switch",intro:"Finally, you might want to enable coloring for colorblindness",position:"top"}];!function(e){e.GENERAL="General",e.LANGUAGES="Languages"}(_||(_={}));var Q=function(){var e,t=Object(a.useState)(!0),n=Object(c.a)(t,2),i=n[0],r=n[1],y=Object(a.useState)(_.GENERAL),k=Object(c.a)(y,2),S=k[0],O=k[1],j=Object(a.useState)(!1),w=Object(c.a)(j,2),x=w[0],N=w[1],C=Object(a.useState)(!1),A=Object(c.a)(C,2),L=A[0],G=A[1],T=Object(a.useState)(null),z=Object(c.a)(T,2),R=z[0],F=z[1],P=Object(a.useState)(-1),W=Object(c.a)(P,2),D=W[0],M=W[1],K=function(e){M(e)},J=B(null!==(e=null===R||void 0===R?void 0:R.neutralityScore)&&void 0!==e?e:0);return o.a.createElement(o.a.Fragment,null,R&&o.a.createElement(I,{show:x,colorBlindness:L,handleClose:function(){return N(!1)},chartData:{data:R.sentiments,onLabelClicked:K}}),o.a.createElement(p.Steps,{enabled:null!==R&&i,steps:$,initialStep:0,onExit:function(){r(!1),O(_.GENERAL)},onBeforeChange:function(e){e>=5?S!==_.LANGUAGES&&O(_.LANGUAGES):_.GENERAL!==S&&O(_.GENERAL)}}),o.a.createElement("h3",{className:"mt-5 mb-3 text-muted"},"Compose neutral text easily"),o.a.createElement("main",{className:L?"enable-color-blindness":""},o.a.createElement("div",{className:"d-flex align-items-center justify-content-between"},o.a.createElement(s.a,{key:"overlay-help",placement:"top",overlay:o.a.createElement(u.a,{id:"tooltip-overlay-help"},null===R&&o.a.createElement(o.a.Fragment,null,"Start by writing some text below!"),null!==R&&o.a.createElement(o.a.Fragment,null,"Follow our guide!"))},(function(e){var t=e.ref,n=Object(l.a)(e,["ref"]);return o.a.createElement(m.a,Object.assign({variant:"light",disabled:null===R,onClick:function(){return r(!0)},ref:t},n),o.a.createElement(b.a,{icon:E.c,onClick:function(){return r(!0)}}),o.a.createElement("span",{className:"ml-3"},"Help"))})),o.a.createElement(d.a.Check,{type:"switch",id:"switch-accessibility",onChange:function(){return G(!L)},value:L?"checked":"",label:"Enable coloring for colorblindness"})),o.a.createElement(g.a,{className:"bg-white p-3"},o.a.createElement(f.a,null,o.a.createElement(H,{onUpdateMetrics:function(e){F(e)},highlight:D})),o.a.createElement(f.a,null,o.a.createElement(h.a,{defaultActiveKey:_.GENERAL,activeKey:S,onSelect:function(e){return O(e)}},o.a.createElement(v.a,{eventKey:_.GENERAL,title:_.GENERAL},!R&&o.a.createElement(Y,null),o.a.createElement("div",{className:"p-3"},R&&o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{className:"float-right",variant:"link",size:"sm",onClick:function(){return N(!0)}},"Increase chart size",o.a.createElement(b.a,{className:"ml-1",icon:E.a})),o.a.createElement(U,{colorBlindness:L,data:R.sentiments,onLabelClicked:K}),o.a.createElement(g.a,{className:"text-center mt-5"},o.a.createElement(f.a,{className:"col-separator"},o.a.createElement("h3",{className:"text-muted"},R.countWords),"Words"),o.a.createElement(f.a,{className:"neutrality-score col-separator"},o.a.createElement("h3",{className:"text-muted"},R.neutralityScore,o.a.createElement(b.a,{className:J?"ml-2 icon-success":"icon-warning",icon:J?E.d:E.b})),"Neutrality score"),o.a.createElement(f.a,{className:"neutrality-variance"},o.a.createElement("h3",{className:"text-muted"},R.varianceScore),"Neutrality variance"))))),o.a.createElement(v.a,{className:"languages-tab",eventKey:_.LANGUAGES,title:_.LANGUAGES},!R&&o.a.createElement(Y,null),R&&o.a.createElement(q,{data:R.languages,onBarClicked:K})))))))},X=function(e){var t=e.children;return o.a.createElement("div",{className:"container main-container"},t)};n(604),n(605),n(606);var Z=function(){return o.a.createElement(X,null,o.a.createElement(Q,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[322,1,2]]]);
//# sourceMappingURL=main.8aa866e7.chunk.js.map